"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.modules = exports.root = exports.define = void 0;
/**
 * adds support for asynchronous plugin loading`
 * issue/127
 */
function define(root, plugin) {
    // handle cjs setups
    if (typeof exports === "object" && typeof module !== "undefined")
        return plugin;
    if (!("flowplayer" in root))
        root.flowplayer = { extensions: [] };
    var self = root.flowplayer;
    if (typeof self === "function") {
        self(plugin);
        return plugin;
    }
    if (!Array.isArray(self.extensions))
        self.extensions = [];
    if (!~self.extensions.indexOf(plugin))
        self.extensions.push(plugin);
    return plugin;
}
exports.define = define;
function root() {
    if (typeof window !== "undefined")
        return window;
    // eslint-disable-next-line no-undef
    if (typeof global !== "undefined")
        return global;
    return {};
}
exports.root = root;
function modules() {
    var self = root();
    // naively check for existance of flowplayer umd
    var mod = self.flowplayer ? self.flowplayer : { extensions: [] };
    if (!Array.isArray(mod.extensions))
        mod.extensions = [];
    return mod;
}
exports.modules = modules;
